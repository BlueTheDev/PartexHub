<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PartexHub Full Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Montserrat&family=Lobster&family=Open+Sans&family=Pacifico&family=Fira+Code&family=Courier+Prime&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ---------------- Grundlayout ---------------- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: 0.3s;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        body.dark {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
        }
        
        header {
            background: rgba(30, 30, 30, 0.95);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
        }
        
        header h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 28px;
            letter-spacing: 1px;
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        header .buttons {
            display: flex;
            gap: 10px;
        }
        
        header button {
            padding: 8px 14px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: white;
            cursor: pointer;
            transition: 0.3s;
            font-size: 14px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        header button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
        
        .theme-toggle {
            background: linear-gradient(135deg, #ff512f, #dd2476);
        }
        
        .dashboard {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            padding: 40px;
            justify-content: center;
            transition: 0.5s;
        }
        
        .app-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 25px;
            width: 220px;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
            cursor: pointer;
            position: relative;
            transition: 0.5s;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .app-card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 36px rgba(0,0,0,0.25);
            background: rgba(255, 255, 255, 1);
        }
        
        body.dark .app-card {
            background: rgba(40, 40, 40, 0.9);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        body.dark .app-card:hover {
            background: rgba(50, 50, 50, 1);
        }
        
        .app-card h2 {
            margin-top: 15px;
            font-size: 18px;
            font-family: 'Montserrat', sans-serif;
        }
        
        .app-card img {
            width: 60px;
            height: 60px;
            filter: grayscale(0.3);
        }
        
        .app-card .tooltip {
            position: absolute;
            bottom: -30px;
            font-size: 12px;
            background: rgba(0,0,0,0.75);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            opacity: 0;
            pointer-events: none;
            transition: 0.3s;
        }
        
        .app-card:hover .tooltip {
            opacity: 1;
        }
        
        #app-container {
            display: none;
            padding: 20px;
            transition: 0.5s;
        }
        
        /* Writer Styles */
        .writer-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        body.dark .writer-container {
            background: #1e1e1e;
        }
        
        .menu-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 0;
            padding: 12px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            transition: 0.3s;
        }
        
        body.dark .menu-bar {
            background: #2d2d2d;
            border-bottom: 1px solid #444;
        }
        
        .menu-bar select, .menu-bar button, .menu-bar input[type=color] {
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 14px;
            cursor: pointer;
            transition: 0.2s;
            background: white;
        }
        
        body.dark .menu-bar select, 
        body.dark .menu-bar button, 
        body.dark .menu-bar input[type=color] {
            background: #3d3d3d;
            border-color: #555;
            color: white;
        }
        
        .menu-bar button:hover {
            background: #e9ecef;
        }
        
        body.dark .menu-bar button:hover {
            background: #4d4d4d;
        }
        
        #editor {
            width: 100%;
            min-height: 600px;
            border: none;
            padding: 30px;
            font-size: 16px;
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            overflow: auto;
            outline: none;
            transition: 0.3s;
        }
        
        body.dark #editor {
            background: #1e1e1e;
            color: white;
        }
        
        /* Presenter Styles */
        .presenter-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        body.dark .presenter-container {
            background: #1e1e1e;
        }
        
        #slides-container {
            width: 100%;
            height: 600px;
            position: relative;
            background: #fff;
            overflow: hidden;
            display: none;
        }
        
        body.dark #slides-container {
            background: #2d2d2d;
        }
        
        .slide {
            display: none;
            width: 100%;
            height: 100%;
            padding: 40px;
            font-size: 20px;
            line-height: 1.5;
            font-family: 'Roboto', sans-serif;
            position: absolute;
            top: 0;
            left: 0;
            transition: all 0.5s;
            overflow: auto;
            background: white;
        }
        
        body.dark .slide {
            background: #2d2d2d;
            color: white;
        }
        
        .slide.active {
            display: block;
        }
        
        .slide-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .slide-content {
            font-size: 18px;
            line-height: 1.6;
        }
        
        .slide-textbox {
            padding: 15px;
            border: 2px dashed #888;
            border-radius: 8px;
            background: rgba(255,255,255,0.9);
            position: absolute;
            cursor: move;
            user-select: none;
            min-width: 200px;
            min-height: 100px;
        }
        
        body.dark .slide-textbox {
            background: rgba(50,50,50,0.9);
            border: 2px dashed #777;
        }
        
        .slide-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            background: rgba(0,0,0,0.7);
            padding: 10px 20px;
            border-radius: 25px;
        }
        
        .slide-controls button {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: 0.2s;
        }
        
        .slide-controls button:hover {
            background: rgba(255,255,255,0.2);
        }
        
        /* Auth Panel */
        #auth-panel {
            padding: 50px;
            text-align: center;
            background: rgba(255,255,255,0.9);
            margin: 50px auto;
            max-width: 500px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        body.dark #auth-panel {
            background: rgba(40, 40, 40, 0.9);
        }
        
        #auth-panel input {
            padding: 12px 16px;
            margin: 8px;
            width: 80%;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 14px;
        }
        
        body.dark #auth-panel input {
            background: #2d2d2d;
            border-color: #555;
            color: white;
        }
        
        #auth-panel button {
            padding: 12px 16px;
            margin: 10px;
            width: 60%;
            border-radius: 8px;
            border: none;
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: 0.3s;
        }
        
        #auth-panel button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        #user-info {
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        /* Mail App Styles */
        #mail-container {
            display: none;
            width: 100%;
            height: 80vh;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        body.dark #mail-container {
            background: #1e1e1e;
        }
        
        .mail-layout {
            display: flex;
            height: 100%;
        }
        
        .mail-sidebar {
            width: 250px;
            background: #f8f9fa;
            height: 100%;
            border-right: 1px solid #dee2e6;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        body.dark .mail-sidebar {
            background: #2d2d2d;
            border-right: 1px solid #444;
        }
        
        .mail-content {
            flex: 1;
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .mail-toolbar {
            padding: 15px 20px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
        }
        
        body.dark .mail-toolbar {
            background: #2d2d2d;
            border-bottom: 1px solid #444;
        }
        
        .mail-main {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        .mail-list-container {
            width: 35%;
            border-right: 1px solid #dee2e6;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        body.dark .mail-list-container {
            border-right: 1px solid #444;
        }
        
        .mail-view-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .mail-folders {
            list-style: none;
            margin-bottom: 20px;
        }
        
        .mail-folders li {
            padding: 12px 15px;
            cursor: pointer;
            border-radius: 6px;
            margin-bottom: 5px;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .mail-folders li:hover, .mail-folders li.active {
            background: #e9ecef;
        }
        
        body.dark .mail-folders li:hover, body.dark .mail-folders li.active {
            background: #3d3d3d;
        }
        
        .mail-list {
            flex: 1;
            overflow-y: auto;
        }
        
        .mail-item {
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .mail-item:hover {
            background: #f8f9fa;
        }
        
        body.dark .mail-item:hover {
            background: #2d2d2d;
        }
        
        .mail-item.unread {
            font-weight: bold;
            background: #e7f3ff;
        }
        
        body.dark .mail-item.unread {
            background: #1a3a5f;
        }
        
        .mail-item:last-child {
            border-bottom: none;
        }
        
        .mail-sender {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .mail-subject {
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .mail-preview {
            color: #6c757d;
            font-size: 13px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
        }
        
        .mail-date {
            font-size: 12px;
            color: #6c757d;
            white-space: nowrap;
        }
        
        .mail-view {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .mail-header {
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }
        
        .mail-actions {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }
        
        .mail-btn {
            padding: 8px 16px;
            border: 1px solid #dee2e6;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: 0.2s;
        }
        
        .mail-btn:hover {
            background: #f8f9fa;
        }
        
        body.dark .mail-btn {
            background: #2d2d2d;
            border-color: #444;
            color: white;
        }
        
        body.dark .mail-btn:hover {
            background: #3d3d3d;
        }
        
        .mail-btn.primary {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .mail-btn.primary:hover {
            background: #0056b3;
        }
        
        .compose-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            width: 100%;
            justify-content: center;
        }
        
        .compose-btn:hover {
            background: #0056b3;
        }
        
        /* Neue Stile für zusätzliche Funktionen */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: #4CAF50;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 3000;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .notification.error {
            background: #f44336;
        }
        
        #word-count {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.1);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        #slide-counter {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.1);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px 20px;
            background: rgba(255,255,255,0.9);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        body.dark .app-header {
            background: rgba(40, 40, 40, 0.9);
        }
        
        .app-title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .back-button {
            padding: 8px 16px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .back-button:hover {
            background: #5a6268;
        }
        
        /* Email Setup Styles - FIXED */
        #email-setup {
            display: none;
            padding: 30px;
            background: white;
            border-radius: 12px;
            margin: 20px auto;
            max-width: 800px;
            text-align: center;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }
        
        body.dark #email-setup {
            background: #1e1e1e;
        }
        
        .email-option {
            display: inline-block;
            width: 200px;
            padding: 20px;
            margin: 10px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .email-option:hover {
            border-color: #007bff;
            transform: translateY(-5px);
        }
        
        .email-option.selected {
            border-color: #007bff;
            background: #e7f3ff;
        }
        
        body.dark .email-option.selected {
            background: #1a3a5f;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
        }
        
        /* Settings App */
        .settings-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }
        
        body.dark .settings-container {
            background: #1e1e1e;
        }
        
        .settings-category {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #dee2e6;
        }
        
        body.dark .settings-category {
            border-bottom: 1px solid #444;
        }
        
        .settings-category h3 {
            margin-bottom: 15px;
            color: #007bff;
        }
        
        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab-button {
            padding: 10px 20px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.2s;
        }
        
        .tab-button.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        body.dark .tab-button {
            background: #2d2d2d;
            border-color: #444;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Status Bar */
        .status-bar {
            display: flex;
            justify-content: space-between;
            padding: 8px 15px;
            background: #f8f9fa;
            border-top: 1px solid #dee2e6;
            font-size: 12px;
            color: #6c757d;
        }
        
        body.dark .status-bar {
            background: #2d2d2d;
            border-top: 1px solid #444;
        }
    </style>
</head>
<body>
    <header>
        <h1>PartexHub</h1>
        <div class="buttons">
            <button onclick="goDashboard()">Dashboard</button>
            <button class="theme-toggle" onclick="toggleTheme()">Theme</button>
        </div>
    </header>

    <div id="auth-panel">
        <div id="user-info"></div>
        <input type="text" id="username" placeholder="Benutzername"><br>
        <input type="email" id="email" placeholder="Email"><br>
        <input type="password" id="password" placeholder="Passwort"><br>
        <button onclick="signup()">Registrieren</button>
        <button onclick="login()">Login</button>
    </div>

    <div class="dashboard" id="dashboard" style="display:none;">
        <div class="app-card" onclick="openWriter()">
            <img src="https://img.icons8.com/ios-filled/50/000000/edit--v1.png"/>
            <h2>PartexWriter</h2>
            <div class="tooltip">Voll ausgestatteter Texteditor wie Word</div>
        </div>
        <div class="app-card" onclick="openPresenter()">
            <img src="https://img.icons8.com/ios-filled/50/000000/presentation.png"/>
            <h2>PartexPresenter</h2>
            <div class="tooltip">Präsentationen wie PowerPoint erstellen</div>
        </div>
        <div class="app-card" onclick="openMail()">
            <img src="https://img.icons8.com/ios-filled/50/000000/email.png"/>
            <h2>PartexMail</h2>
            <div class="tooltip">E-Mail Client mit @partex.com Adressen</div>
        </div>
        <div class="app-card" onclick="openSettingsApp()">
            <img src="https://img.icons8.com/ios-filled/50/000000/settings.png"/>
            <h2>Einstellungen</h2>
            <div class="tooltip">PartexHub konfigurieren und anpassen</div>
        </div>
    </div>

    <div id="app-container">
        <!-- Writer Header -->
        <div class="app-header" id="writer-header" style="display:none;">
            <div class="app-title">PartexWriter - Professioneller Texteditor</div>
            <button class="back-button" onclick="goDashboard()"><i class="fas fa-arrow-left"></i> Dashboard</button>
        </div>
        
        <!-- Writer App -->
        <div id="writer-app" style="display:none;">
            <div class="writer-container">
                <div class="menu-bar">
                    <select id="font-select" onchange="changeFont()">
                        <option value="Arial">Arial</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Courier New">Courier New</option>
                    </select>
                    <select id="font-size" onchange="changeFontSize()">
                        <option value="12">12</option>
                        <option value="14">14</option>
                        <option value="16" selected>16</option>
                        <option value="18">18</option>
                        <option value="20">20</option>
                        <option value="24">24</option>
                    </select>
                    <input type="color" id="text-color" onchange="changeColor()" title="Textfarbe">
                    <input type="color" id="bg-color" onchange="changeBg()" title="Hintergrundfarbe">
                    <button onclick="boldText()"><i class="fas fa-bold"></i></button>
                    <button onclick="italicText()"><i class="fas fa-italic"></i></button>
                    <button onclick="underlineText()"><i class="fas fa-underline"></i></button>
                    <button onclick="alignLeft()"><i class="fas fa-align-left"></i></button>
                    <button onclick="alignCenter()"><i class="fas fa-align-center"></i></button>
                    <button onclick="alignRight()"><i class="fas fa-align-right"></i></button>
                    <button onclick="insertBullet()"><i class="fas fa-list-ul"></i></button>
                    <button onclick="insertNumber()"><i class="fas fa-list-ol"></i></button>
                    <button onclick="insertImage()"><i class="fas fa-image"></i></button>
                    <button onclick="insertTable()"><i class="fas fa-table"></i></button>
                    <button onclick="saveAs()"><i class="fas fa-save"></i> Speichern</button>
                    <button onclick="printDocument()"><i class="fas fa-print"></i> Drucken</button>
                </div>
                
                <!-- Editor -->
                <div id="editor" contenteditable="true"></div>
                
                <!-- Status Bar -->
                <div class="status-bar">
                    <div id="word-count">Wörter: 0 | Zeichen: 0</div>
                    <div>Seite 1 von 1</div>
                    <div>100%</div>
                </div>
            </div>
        </div>

        <!-- Presenter Header -->
        <div class="app-header" id="presenter-header" style="display:none;">
            <div class="app-title">PartexPresenter - Präsentationen erstellen</div>
            <button class="back-button" onclick="goDashboard()"><i class="fas fa-arrow-left"></i> Dashboard</button>
        </div>
        
        <!-- Presenter App -->
        <div id="presenter-app" style="display:none;">
            <div class="presenter-container">
                <div class="menu-bar">
                    <button onclick="addSlide()"><i class="fas fa-plus"></i> Neue Folie</button>
                    <button onclick="deleteSlide()"><i class="fas fa-trash"></i> Folie löschen</button>
                    <input type="color" id="slide-bg" onchange="changeSlideBg()" title="Hintergrundfarbe">
                    <button onclick="addTextBox()"><i class="fas fa-font"></i> Textbox</button>
                    <button onclick="addImageToSlide()"><i class="fas fa-image"></i> Bild</button>
                    <button onclick="prevSlide()"><i class="fas fa-chevron-left"></i></button>
                    <button onclick="nextSlide()"><i class="fas fa-chevron-right"></i></button>
                    <button onclick="startPresentation()"><i class="fas fa-play"></i> Präsentation starten</button>
                    <button onclick="downloadPresentation()"><i class="fas fa-download"></i> Herunterladen</button>
                </div>
                <div id="slides-container"></div>
                <div class="slide-controls">
                    <button onclick="prevSlide()"><i class="fas fa-chevron-left"></i></button>
                    <span id="slide-counter">Folie 1 von 1</span>
                    <button onclick="nextSlide()"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>

        <!-- Mail Header -->
        <div class="app-header" id="mail-header" style="display:none;">
            <div class="app-title">PartexMail - E-Mail Client</div>
            <button class="back-button" onclick="goDashboard()"><i class="fas fa-arrow-left"></i> Dashboard</button>
        </div>
        
        <!-- Mail App -->
        <div id="mail-container" style="display:none;">
            <div class="mail-layout">
                <div class="mail-sidebar">
                    <button class="compose-btn" onclick="openComposeModal()">
                        <i class="fas fa-edit"></i> Verfassen
                    </button>
                    <ul class="mail-folders">
                        <li class="active" onclick="showFolder('inbox')">
                            <i class="fas fa-inbox"></i> Posteingang
                            <span id="inbox-count" class="folder-count"></span>
                        </li>
                        <li onclick="showFolder('sent')">
                            <i class="fas fa-paper-plane"></i> Gesendet
                        </li>
                        <li onclick="showFolder('drafts')">
                            <i class="fas fa-file-alt"></i> Entwürfe
                        </li>
                        <li onclick="showFolder('trash')">
                            <i class="fas fa-trash"></i> Papierkorb
                        </li>
                    </ul>
                </div>
                <div class="mail-content">
                    <div class="mail-toolbar">
                        <div class="mail-actions">
                            <button class="mail-btn" onclick="refreshMail()">
                                <i class="fas fa-sync-alt"></i> Aktualisieren
                            </button>
                            <button class="mail-btn" onclick="deleteSelectedEmails()">
                                <i class="fas fa-trash"></i> Löschen
                            </button>
                        </div>
                        <div class="mail-search">
                            <input type="text" id="mail-search" placeholder="E-Mails durchsuchen..." style="padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        </div>
                    </div>
                    <div class="mail-main">
                        <div class="mail-list-container">
                            <div class="mail-list" id="email-list">
                                <!-- Emails werden hier dynamisch geladen -->
                            </div>
                        </div>
                        <div class="mail-view-container" id="mail-view-container">
                            <div id="empty-view" style="display: flex; justify-content: center; align-items: center; height: 100%; color: #6c757d;">
                                <div style="text-align: center;">
                                    <i class="fas fa-envelope-open" style="font-size: 48px; margin-bottom: 15px;"></i>
                                    <h3>Wählen Sie eine E-Mail aus</h3>
                                    <p>Klicken Sie auf eine E-Mail in der Liste, um sie zu lesen</p>
                                </div>
                            </div>
                            <div id="mail-view" style="display: none;">
                                <div class="mail-actions">
                                    <button class="mail-btn" onclick="backToInbox()">
                                        <i class="fas fa-arrow-left"></i> Zurück
                                    </button>
                                    <button class="mail-btn" onclick="replyEmail()">
                                        <i class="fas fa-reply"></i> Antworten
                                    </button>
                                    <button class="mail-btn" onclick="forwardEmail()">
                                        <i class="fas fa-share"></i> Weiterleiten
                                    </button>
                                    <button class="mail-btn" onclick="deleteCurrentEmail()">
                                        <i class="fas fa-trash"></i> Löschen
                                    </button>
                                </div>
                                <div class="mail-view" id="email-content">
                                    <!-- Email-Inhalt wird hier angezeigt -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings App -->
        <div id="settings-app" style="display:none;">
            <div class="app-header">
                <div class="app-title">Einstellungen - PartexHub konfigurieren</div>
                <button class="back-button" onclick="goDashboard()"><i class="fas fa-arrow-left"></i> Dashboard</button>
            </div>
            <div class="settings-container">
                <div class="tab-buttons">
                    <div class="tab-button active" onclick="showSettingsTab('general')">Allgemein</div>
                    <div class="tab-button" onclick="showSettingsTab('account')">Konto</div>
                    <div class="tab-button" onclick="showSettingsTab('privacy')">Datenschutz</div>
                    <div class="tab-button" onclick="showSettingsTab('about')">Über</div>
                </div>
                
                <div class="tab-content active" id="general-tab">
                    <div class="settings-category">
                        <h3>Erscheinungsbild</h3>
                        <div class="setting-item">
                            <label for="theme-select">Theme</label>
                            <select id="theme-select" onchange="changeTheme(this.value)">
                                <option value="light">Hell</option>
                                <option value="dark">Dunkel</option>
                                <option value="auto">Automatisch</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="account-tab">
                    <div class="settings-category">
                        <h3>Kontoinformationen</h3>
                        <div class="setting-item">
                            <label>Benutzername</label>
                            <span id="username-display">Nicht eingeloggt</span>
                        </div>
                        <div class="setting-item">
                            <label>E-Mail</label>
                            <span id="email-display">Nicht eingeloggt</span>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="privacy-tab">
                    <div class="settings-category">
                        <h3>Datenschutzeinstellungen</h3>
                        <div class="setting-item">
                            <label for="data-collection">Daten für Verbesserungen sammeln</label>
                            <input type="checkbox" id="data-collection">
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="about-tab">
                    <div class="settings-category">
                        <h3>Über PartexHub</h3>
                        <p>PartexHub Version 2.0</p>
                        <p id="copyright-info">© 2024 Partex Corporation. Alle Rechte vorbehalten.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Element -->
    <div id="notification" class="notification"></div>

    <script>
        // ---------------- Dynamische Daten ----------------
        const currentYear = new Date().getFullYear();
        document.getElementById('copyright-info').textContent = `© ${currentYear} Partex Corporation. Alle Rechte vorbehalten.`;

        // ---------------- Auth System ----------------
        let currentUser = null;
        let userEmailAddress = null;
        
        function updateUI(user) {
            const info = document.getElementById('user-info');
            if (user) {
                info.innerHTML = `Eingeloggt als: ${user.username} <button onclick="logout()">Logout</button>`;
                document.getElementById('auth-panel').style.display = 'none';
                document.getElementById('dashboard').style.display = 'flex';
                currentUser = user;
                
                // Update settings display
                document.getElementById('username-display').textContent = user.username;
                document.getElementById('email-display').textContent = user.email;
                
                // Check if user has email address
                userEmailAddress = localStorage.getItem(`partexmail-${user.email}`);
                if (!userEmailAddress && user.email) {
                    // Auto-create email address
                    const username = user.username.toLowerCase().replace(/\s+/g, '.');
                    userEmailAddress = `${username}@partex.com`;
                    localStorage.setItem(`partexmail-${user.email}`, userEmailAddress);
                }
            } else {
                info.innerHTML = '';
                document.getElementById('auth-panel').style.display = 'block';
                document.getElementById('dashboard').style.display = 'none';
                document.getElementById('app-container').style.display = 'none';
                currentUser = null;
                userEmailAddress = null;
            }
        }
        
        window.signup = function() {
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            
            if (!username || !email || !pass) {
                showNotification('Bitte füllen Sie alle Felder aus', 'error');
                return;
            }
            
            // Simuliere Registrierung
            const user = { username, email };
            localStorage.setItem('partex-user', JSON.stringify(user));
            updateUI(user);
            showNotification('Erfolgreich registriert!');
        };
        
        window.login = function() {
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            
            if (!username || !email || !pass) {
                showNotification('Bitte füllen Sie alle Felder aus', 'error');
                return;
            }
            
            // Check if user exists
            const savedUser = localStorage.getItem('partex-user');
            if (savedUser) {
                const user = JSON.parse(savedUser);
                if (user.email === email) {
                    updateUI(user);
                    showNotification('Erfolgreich eingeloggt!');
                    return;
                }
            }
            
            // Create new user if not exists
            const user = { username, email };
            localStorage.setItem('partex-user', JSON.stringify(user));
            updateUI(user);
            showNotification('Neues Konto erstellt und eingeloggt!');
        };
        
        window.logout = function() {
            updateUI(null);
            showNotification('Erfolgreich ausgeloggt!');
        };
        
        // Check for existing login on load
        document.addEventListener('DOMContentLoaded', function() {
            const savedUser = localStorage.getItem('partex-user');
            if (savedUser) {
                updateUI(JSON.parse(savedUser));
            }
            
            const savedTheme = localStorage.getItem('partex-theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark');
            }
        });

        // ---------------- Dashboard ----------------
        function goDashboard() {
            document.getElementById('dashboard').style.display = 'flex';
            document.getElementById('app-container').style.display = 'none';
            document.getElementById('writer-app').style.display = 'none';
            document.getElementById('presenter-app').style.display = 'none';
            document.getElementById('mail-container').style.display = 'none';
            document.getElementById('settings-app').style.display = 'none';
            document.getElementById('writer-header').style.display = 'none';
            document.getElementById('presenter-header').style.display = 'none';
            document.getElementById('mail-header').style.display = 'none';
        }
        
        function toggleTheme() {
            document.body.classList.toggle('dark');
            localStorage.setItem('partex-theme', document.body.classList.contains('dark') ? 'dark' : 'light');
            showNotification('Theme geändert');
        }

        // ---------------- Writer App ----------------
        function openWriter() {
            if (!currentUser) {
                showNotification('Bitte loggen Sie sich zuerst ein', 'error');
                return;
            }
            
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('app-container').style.display = 'block';
            document.getElementById('writer-app').style.display = 'block';
            document.getElementById('presenter-app').style.display = 'none';
            document.getElementById('mail-container').style.display = 'none';
            document.getElementById('settings-app').style.display = 'none';
            document.getElementById('writer-header').style.display = 'flex';
            document.getElementById('presenter-header').style.display = 'none';
            document.getElementById('mail-header').style.display = 'none';
            
            // Load saved content
            let content = localStorage.getItem('partex-writer-content');
            document.getElementById('editor').innerHTML = content ? content : '<h1>Neues Dokument</h1><p>Beginnen Sie mit der Eingabe...</p>';
            
            // Initialize word count
            updateWordCount();
            
            // Add event listeners
            document.getElementById('editor').addEventListener('input', function() {
                updateWordCount();
                autoSaveWriter();
            });
            
            showNotification('PartexWriter geöffnet');
        }
        
        function updateWordCount() {
            const text = document.getElementById('editor').innerText || '';
            const words = text.trim() ? text.trim().split(/\s+/).length : 0;
            const chars = text.length;
            document.getElementById('word-count').textContent = `Wörter: ${words} | Zeichen: ${chars}`;
        }
        
        function autoSaveWriter() {
            const content = document.getElementById('editor').innerHTML;
            localStorage.setItem('partex-writer-content', content);
        }
        
        // Writer functions
        function changeFont() {
            document.getElementById('editor').style.fontFamily = document.getElementById('font-select').value;
        }
        
        function changeFontSize() {
            document.getElementById('editor').style.fontSize = document.getElementById('font-size').value + 'px';
        }
        
        function changeColor() {
            document.execCommand('foreColor', false, document.getElementById('text-color').value);
        }
        
        function changeBg() {
            document.execCommand('backColor', false, document.getElementById('bg-color').value);
        }
        
        function boldText() { document.execCommand('bold'); }
        function italicText() { document.execCommand('italic'); }
        function underlineText() { document.execCommand('underline'); }
        function alignLeft() { document.execCommand('justifyLeft'); }
        function alignCenter() { document.execCommand('justifyCenter'); }
        function alignRight() { document.execCommand('justifyRight'); }
        function insertBullet() { document.execCommand('insertUnorderedList'); }
        function insertNumber() { document.execCommand('insertOrderedList'); }
        
        function saveAs() {
            let content = document.getElementById('editor').innerHTML;
            const blob = new Blob([content], {type: "text/html"});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'PartexDocument.html';
            a.click();
            showNotification('Dokument gespeichert');
        }
        
        function printDocument() { window.print(); }
        
        function insertImage() {
            let input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = e => {
                let file = e.target.files[0];
                let reader = new FileReader();
                reader.onload = function(ev) {
                    document.execCommand('insertImage', false, ev.target.result);
                };
                reader.readAsDataURL(file);
            };
            input.click();
        }
        
        function insertTable() {
            let rows = prompt("Anzahl der Zeilen?", 3);
            let cols = prompt("Anzahl der Spalten?", 3);
            if (!rows || !cols) return;
            let table = '<table border="1" style="border-collapse:collapse; width:100%;">';
            for (let i = 0; i < rows; i++) {
                table += '<tr>';
                for (let j = 0; j < cols; j++) {
                    table += '<td contenteditable="true">&nbsp;</td>';
                }
                table += '</tr>';
            }
            table += '</table>';
            document.execCommand('insertHTML', false, table);
        }

        // ---------------- Presenter App ----------------
        let slides = [];
        let currentSlide = 0;
        
        function openPresenter() {
            if (!currentUser) {
                showNotification('Bitte loggen Sie sich zuerst ein', 'error');
                return;
            }
            
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('app-container').style.display = 'block';
            document.getElementById('writer-app').style.display = 'none';
            document.getElementById('presenter-app').style.display = 'block';
            document.getElementById('mail-container').style.display = 'none';
            document.getElementById('settings-app').style.display = 'none';
            document.getElementById('writer-header').style.display = 'none';
            document.getElementById('presenter-header').style.display = 'flex';
            document.getElementById('mail-header').style.display = 'none';
            
            // Initialize slides if empty
            if (slides.length === 0) {
                addSlide();
            } else {
                showSlide(currentSlide);
            }
            
            updateSlideCounter();
            showNotification('PartexPresenter geöffnet');
        }
        
        function addSlide() {
            const slide = document.createElement('div');
            slide.className = 'slide';
            slide.innerHTML = `
                <div class="slide-title" contenteditable="true">Titel der Folie</div>
                <div class="slide-content" contenteditable="true">Inhalt hier eingeben...</div>
            `;
            document.getElementById('slides-container').appendChild(slide);
            slides.push(slide);
            currentSlide = slides.length - 1;
            showSlide(currentSlide);
            updateSlideCounter();
        }
        
        function deleteSlide() {
            if (slides.length <= 1) {
                showNotification('Mindestens eine Folie muss vorhanden sein', 'error');
                return;
            }
            
            slides[currentSlide].remove();
            slides.splice(currentSlide, 1);
            
            if (currentSlide >= slides.length) currentSlide = slides.length - 1;
            showSlide(currentSlide);
            updateSlideCounter();
        }
        
        function addTextBox() {
            const slide = slides[currentSlide];
            const textbox = document.createElement('div');
            textbox.className = 'slide-textbox';
            textbox.contentEditable = true;
            textbox.innerText = 'Text hier eingeben';
            textbox.style.top = '100px';
            textbox.style.left = '100px';
            slide.appendChild(textbox);
            dragElement(textbox);
        }
        
        function addImageToSlide() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = function(ev) {
                    const slide = slides[currentSlide];
                    const img = document.createElement('img');
                    img.src = ev.target.result;
                    img.style.maxWidth = '80%';
                    img.style.maxHeight = '60%';
                    img.style.position = 'absolute';
                    img.style.top = '50%';
                    img.style.left = '50%';
                    img.style.transform = 'translate(-50%, -50%)';
                    slide.appendChild(img);
                };
                reader.readAsDataURL(file);
            };
            input.click();
        }
        
        function startPresentation() {
            document.getElementById('slides-container').requestFullscreen().catch(err => {
                console.log('Fullscreen error:', err);
            });
            showNotification('Präsentation gestartet - ESC zum Beenden');
        }
        
        function downloadPresentation() {
            let content = '';
            slides.forEach((slide, index) => {
                content += `Folie ${index + 1}:\n${slide.innerText}\n\n`;
            });
            
            const blob = new Blob([content], {type: "text/plain"});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'PartexPräsentation.txt';
            a.click();
            showNotification('Präsentation heruntergeladen');
        }
        
        function showSlide(index) {
            slides.forEach((s, i) => {
                s.classList.remove('active');
                s.style.display = 'none';
            });
            
            if (slides[index]) {
                slides[index].classList.add('active');
                slides[index].style.display = 'block';
            }
            
            updateSlideCounter();
        }
        
        function nextSlide() {
            if (currentSlide < slides.length - 1) {
                currentSlide++;
                showSlide(currentSlide);
            }
        }
        
        function prevSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                showSlide(currentSlide);
            }
        }
        
        function changeSlideBg() {
            const color = document.getElementById('slide-bg').value;
            if (slides[currentSlide]) {
                slides[currentSlide].style.background = color;
            }
        }
        
        function updateSlideCounter() {
            document.getElementById('slide-counter').textContent = `Folie ${currentSlide + 1} von ${slides.length}`;
        }

        // ---------------- Mail App ----------------
        let currentFolder = 'inbox';
        let currentEmailId = null;
        let emails = {
            inbox: [
                { 
                    id: 1, 
                    from: 'support@partex.com', 
                    to: userEmailAddress, 
                    subject: 'Willkommen bei PartexMail!', 
                    body: 'Herzlich willkommen bei Ihrem neuen PartexMail Account!\n\nWir freuen uns, Sie in unserer Community begrüßen zu dürfen.', 
                    date: new Date().toISOString(), 
                    read: false 
                }
            ],
            sent: [],
            drafts: [],
            trash: []
        };
        
        function openMail() {
            if (!currentUser) {
                showNotification('Bitte loggen Sie sich zuerst ein', 'error');
                return;
            }
            
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('app-container').style.display = 'block';
            document.getElementById('writer-app').style.display = 'none';
            document.getElementById('presenter-app').style.display = 'none';
            document.getElementById('mail-container').style.display = 'block';
            document.getElementById('settings-app').style.display = 'none';
            document.getElementById('writer-header').style.display = 'none';
            document.getElementById('presenter-header').style.display = 'none';
            document.getElementById('mail-header').style.display = 'flex';
            
            // Update emails with current user's email
            if (userEmailAddress) {
                emails.inbox[0].to = userEmailAddress;
            }
            
            loadEmails();
            showNotification('PartexMail geöffnet');
        }
        
        function showFolder(folder) {
            currentFolder = folder;
            document.querySelectorAll('.mail-folders li').forEach(el => el.classList.remove('active'));
            event.target.closest('li').classList.add('active');
            loadEmails();
        }
        
        function loadEmails() {
            const emailList = document.getElementById('email-list');
            emailList.innerHTML = '';
            
            if (emails[currentFolder].length === 0) {
                emailList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #6c757d;">
                        <i class="fas fa-inbox" style="font-size: 48px; margin-bottom: 15px;"></i>
                        <p>Keine E-Mails in diesem Ordner</p>
                    </div>
                `;
                return;
            }
            
            emails[currentFolder].forEach(email => {
                const emailItem = document.createElement('div');
                emailItem.className = `mail-item ${email.read ? '' : 'unread'}`;
                emailItem.onclick = () => viewEmail(email.id);
                
                const emailDate = new Date(email.date);
                const formattedDate = emailDate.toLocaleDateString('de-DE');
                
                emailItem.innerHTML = `
                    <div style="flex: 1; min-width: 0;">
                        <div class="mail-sender">${email.from}</div>
                        <div class="mail-subject">${email.subject}</div>
                        <div class="mail-preview">${email.body.substring(0, 80)}...</div>
                    </div>
                    <div class="mail-date">${formattedDate}</div>
                `;
                
                emailList.appendChild(emailItem);
            });
            
            document.getElementById('empty-view').style.display = 'flex';
            document.getElementById('mail-view').style.display = 'none';
            currentEmailId = null;
        }
        
        function viewEmail(id) {
            const email = emails[currentFolder].find(e => e.id === id);
            if (email) {
                email.read = true;
                currentEmailId = id;
                
                const emailDate = new Date(email.date);
                const formattedDate = emailDate.toLocaleDateString('de-DE', { 
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                document.getElementById('email-content').innerHTML = `
                    <div class="mail-header">
                        <h2>${email.subject}</h2>
                        <p><strong>Von:</strong> ${email.from}</p>
                        <p><strong>An:</strong> ${email.to}</p>
                        <p><strong>Datum:</strong> ${formattedDate}</p>
                    </div>
                    <div class="mail-body" style="white-space: pre-line; line-height: 1.6;">
                        ${email.body}
                    </div>
                `;
                
                document.getElementById('empty-view').style.display = 'none';
                document.getElementById('mail-view').style.display = 'block';
                
                loadEmails();
            }
        }
        
        function backToInbox() {
            document.getElementById('empty-view').style.display = 'flex';
            document.getElementById('mail-view').style.display = 'none';
            currentEmailId = null;
        }
        
        function refreshMail() {
            loadEmails();
            showNotification('E-Mails aktualisiert');
        }

        // ---------------- Settings App ----------------
        function openSettingsApp() {
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('app-container').style.display = 'block';
            document.getElementById('writer-app').style.display = 'none';
            document.getElementById('presenter-app').style.display = 'none';
            document.getElementById('mail-container').style.display = 'none';
            document.getElementById('settings-app').style.display = 'block';
            document.getElementById('writer-header').style.display = 'none';
            document.getElementById('presenter-header').style.display = 'none';
            document.getElementById('mail-header').style.display = 'none';
            
            showNotification('Einstellungen geöffnet');
        }
        
        function showSettingsTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-button').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }
        
        function changeTheme(theme) {
            if (theme === 'dark') {
                document.body.classList.add('dark');
            } else if (theme === 'light') {
                document.body.classList.remove('dark');
            }
            localStorage.setItem('partex-theme', theme);
            showNotification('Theme geändert');
        }

        // ---------------- Hilfsfunktionen ----------------
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification';
            if (type === 'error') {
                notification.classList.add('error');
            }
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function dragElement(elmnt) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            elmnt.onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }
            
            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                elmnt.style.top = (elmnt.offsetTop - pos2) + 'px';
                elmnt.style.left = (elmnt.offsetLeft - pos1) + 'px';
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }
    </script>
</body>
</html>
